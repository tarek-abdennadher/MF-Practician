<div id="msgDetail">
  <lib-hlsLinks
    [links]="links"
    [page]="page"
    [topText]="topText"
    [bottomText]="''"
    [number]="number"
    [backButton]="backButton"
    (backButtonAction)="goToBack()"
    (importantAction)="importantAction()"
    (archieveAction)="archieveActionClicked()"
    [isMessageImportant]="isMessageImportant"
    (removeImportantAction)="removeImportantAction()"
    (desarchieveAction)="desarchiveMessages()"
    (changeCategoryAction)="changeCategory($event)"
  ></lib-hlsLinks>
  <mat-progress-spinner
    class="spinner"
    *ngIf="loading"
    diameter="20"
    mode="indeterminate"
    value="100"
  >
  </mat-progress-spinner>
  <lib-hlsMessagingDetail
    *ngIf="!loading"
    [imageSource]="imageSource"
    [messagingDetail]="messagingDetail"
    [isFromInbox]="isFromInbox"
    [role]="role"
    [hideTo]="hideTo"
    [hidefrom]="hidefrom"
    [senderRolePatient]="senderRolePatient"
    [showAcceptRefuse]="showAcceptRefuse"
    [showRefuseForTls]="showRefuseForTls"
    [hideButtons]="prohibited"
    [showReplyActionsForPatient]="showReplyActionsForPatient"
    [showReplyActionsForTls]="showReplyActionsForTls"
    (refuseToPatientAction)="refuseToPatientAction()"
    (displayPatientFile)="displayPatientFile($event)"
    (displayForPatientFile)="displayForPatientFile($event)"
    (displayContact)="displayContact($event)"
    (replyAction)="replyAction()"
    (replyActionTLS)="replyActionTLS()"
    (replyActionPatient)="replyActionPatient()"
    (forwardAction)="forwardAction()"
    (acceptAction)="acceptAction()"
    (refuseAction)="refuseAction()"
    (downloadAction)="download($event)"
    (visualizeAction)="visualizeFile($event)"
    [attachements]="attachements"
    [userAccountId]="userAccountId"
  >
  </lib-hlsMessagingDetail>
  <ngx-spinner
    (click)="hideSpinner()"
    [fullScreen]="true"
    type="none"
    size="medium"
    class="message-details"
    *ngIf="shownSpinner"
  >
    <div *ngIf="file.src" class="card-align">
      <img (click)="$event.stopPropagation()" *ngIf="file.isImage" class="card-image" [src]="file.src" />
        <ngx-extended-pdf-viewer
        (click)="$event.stopPropagation()"
        *ngIf="file.isPdf"
        [base64Src]="file.src"
        [zoom]="'page-width'"
        [filenameForDownload]="file.fileName"
        language="fr"
        [showOpenFileButton]="false"
        [showBookmarkButton]="false"
        [showSecondaryToolbarButton]="false"
        [showHandToolButton]="true">
      </ngx-extended-pdf-viewer>
      <span class="card-body image-name">{{ file.fileName }}</span>
    </div>
    <span class="loading" *ngIf="!file.src">{{ loadingText }} ...</span>
  </ngx-spinner>
  <div id="reply" class="reply">
    <router-outlet></router-outlet>
  </div>
  <notifier-container></notifier-container>
  <ng-template #customNotification let-notificationData="notification">
    <div class="text-center" type="notificationData.type">
      <i class="fa fa-check" style="font-size: 11px" aria-hidden="true"></i>
      &nbsp;<span class="information-text">{{ notificationData.message }}</span>
    </div>
  </ng-template>
</div>
