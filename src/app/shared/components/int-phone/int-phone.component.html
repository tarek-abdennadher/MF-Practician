<div>
  <form [formGroup]="phoneForm">
    <div formArrayName="phoneList" *ngFor="let p of phoneList.controls; let i = index">
      <div [formGroupName]="i" class="phoneList">
        <div class="row ml-1 ">
          <div class="col-12 col-sm-6 form-group row mobile-display-none">
            <international-phone-number class="form-control" formControlName="phoneNumber" placeholder="Téléphone"
              [maxlength]="20" [defaultCountry]="phoneList.at(i).get('id') ? '' : 'fr'" [ngClass]="{
                        'is-invalid': submitted && p.controls.phoneNumber.errors
                      }" (input)="onValueChange()">
            </international-phone-number>
            <div *ngIf="
                        submitted &&
                        p.controls.phoneNumber.invalid &&
                        p.controls.phoneNumber.touched &&
                        p.controls.phoneNumber.length !== 0
                      " class="invalid-feedback">
              {{ errorMessage }}
            </div>
          </div>
          <div class="w-xs-custom col-11 col-sm-5 m-px-12-5 mlpl-custom-0 mobile-display-none">
            <input type="text" class="form-control" formControlName="note" placeholder="Préciser..." />
          </div>
          <div class="col-1 col-sm-1 mobile-display-none">
            <button (click)="removePhone(i)" class="btn btn-xs btn-icon mb-2">
              <i class="far fa-trash-alt"></i>
            </button>
          </div>



          <div class="col-12 form-group row mobile-display-flex">
            <international-phone-number class="form-control" formControlName="phoneNumber" placeholder="Téléphone"
                                        [maxlength]="20" [defaultCountry]="phoneList.at(i).get('id') ? '' : 'fr'" [ngClass]="{
                        'is-invalid': submitted && p.controls.phoneNumber.errors
                      }" (input)="onValueChange()">
            </international-phone-number>
            <div *ngIf="
                        submitted &&
                        p.controls.phoneNumber.invalid &&
                        p.controls.phoneNumber.touched &&
                        p.controls.phoneNumber.length !== 0
                      " class="invalid-feedback">
              {{ errorMessage }}
            </div>
          </div>
          <div class="w-xs-custom col-10 mobile-display-flex pl-0 pr-0 mobile-display-flex">
            <input type="text" class="form-control" formControlName="note" placeholder="Préciser..." />
          </div>
          <div class="col-2 ml-auto mobile-display-flex">
            <button (click)="removePhone(i)" class="btn btn-xs btn-icon mb-2 mobile-display-flex">
              <i class="far fa-trash-alt m-t-xs-6"></i>
            </button>
          </div>

        </div>
      </div>
    </div>
  </form>
</div>
