<div>
  <form [formGroup]="phoneForm">
    <div formArrayName="phoneList" *ngFor="let p of phoneList.controls; let i = index">
      <div [formGroupName]="i" class="phoneList">
        <div class="row ml-1 ">
          <div class="col-sm-6 form-group row">
            <international-phone-number class="form-control" formControlName="phoneNumber" placeholder="Téléphone"
              [maxlength]="20" [defaultCountry]="phoneList.at(i).get('id') ? '' : 'fr'" [ngClass]="{
                        'is-invalid': submitted && p.controls.phoneNumber.errors
                      }" (input)="onValueChange()">
            </international-phone-number>
            <div *ngIf="
                        submitted &&
                        p.controls.phoneNumber.invalid &&
                        p.controls.phoneNumber.touched &&
                        p.controls.phoneNumber.length !== 0
                      " class="invalid-feedback">
              {{ errorMessage }}
            </div>
          </div>
          <div class="col-sm-5 m-px-12-5">
            <input type="text" class="form-control" formControlName="note" placeholder="Préciser..." />
          </div>
          <div class="col-sm-1">
            <button (click)="removePhone(i)" class="btn btn-xs btn-icon mb-2">
              <i class="far fa-trash-alt"></i>
            </button>
          </div>
        </div>
      </div>
    </div>
  </form>
</div>
